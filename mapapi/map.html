<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>
    <link rel="stylesheet" href="style/mapstyle.css">
    <title>Tapahtuma kartta</title>
</head>
<body>


<div id ="map"></div>

<script>
    let map = L.map('map').setView([0, 0], 1);

    L.tileLayer('https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=3UTld98zTRPZcQ6xuZKv', {
        attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>'
    }).addTo(map);

    //Kova koodattu tällä hetkellä, tapahtuman tiedot tulisi sitten tietokannasta.
    //Esimerkki tapahtuman luonnista karttaan:
    createEvent("Tuska 2022", "Maratontie 22", "Helsinki", 60.166640739, 24.9493536799);


    //Funktio mitä kutsuttaisiin, kun halutaan luoda tapahtumia karttaan
    function createEvent(eventName, address, city, xcoord, ycoord) {
        eventLocation = L.marker([xcoord, ycoord]).addTo(map);
        console.log(xcoord);
        eventLocation.bindPopup("<b> Tapahtuma: "+eventName+ "</b><br> Tapahtuman osoite: "+ address+ "<br> Tapahtuman paikkakunta: "+city).openPopup;

    }

    //Kun tapahtumaa painetaan listasta niin siirretään kartta kyseisen tapahtuman kohdalle
    function zoomToEvent(xcoord, ycoord) {
        map.setView([xcoord, ycoord], 16);
    }

    //asettaa kartalle alku näkymän
    map.setView([60.236640739, 24.9493536799], 11);

    //Lisää alanurkkaan mittakaavan
    L.control.scale().addTo(map);
</script>

<!-- Testi nappula että zoomaus varmasti toimii -->
<button onclick="zoomToEvent(60.166640739, 24.9493536799)">Tapahtumaan zoomaus</button>


</body>
</html>